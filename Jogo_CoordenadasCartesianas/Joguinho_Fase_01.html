﻿<!DOCTYPE HTML>
<html>
<body class="desativar">
<canvas id="myCanvas" width="640center.x" height="360center.x"></canvas>
<link rel="stylesheet" href="classes.css">
<!-- <script src="C:\Users\Usuario\Documents\PSlibrary2019/PSlibrary20192.js"></script>  -->
<script src="PSlibrary20192.js"></script>
<script src="boneco_andando.js"></script>
<!-- <script src="http://www.fisicainvertida.com/PSlibrary/PSlibrary.js"></script> -->
<script>
//***********************************************//
// VARIÁVEIS ---------------------------------

var center = {      //Centro do sistema e ponto inicial do boneco
    x: 100,
    y: 100
};

var boneco = {
    vx: 0,
    vy: 0,
    angle: 0,
    vel: 1,
    walk: 0,
    size: 50,
    //Condicionais do movimento
    up: false,
    down: false,
    right: false,
    left: false,
    //Métodos do movimento
    mup: function(){
        this.up = true;
        this.angle = 0;
    },
    mdown: function(){
        this.down = true;
        this.angle = 180;
    },
    mright: function(){
        this.right = true;
        this.angle = 90;
    },
    mleft: function(){
        this.left = true;
        this.angle = 270;
    },
    stopmoving: function(){
        this.up = false;
        this.down = false;
        this.right = false;
        this.left = false;
        this.walk = 0;
    }
};

//Classe padrão dos alvos, desse modo quando for personalizar a atividade pode colocar quantos alvos
// quiser e aonde quiser (na tela) no array targets, sem ter que mexer no código
class target {
    constructor(x, y, actRange, show){
        this.x = x;                 //Position
        this.y = y;
        this.actRange = actRange;   //Range that activates it
        this.show = show;           //Wheter or not to show to a flag over it (If unactive it won't show anything)
    }
}

var targets = {
    arr : new Array(),
    // arrdraw : new Array(),
    order : true,
    now : 0,
    confirm : function(){
        alert('oi');
        if(this.order){
            alert('kk');
            alert(this.arr[0].x);            
            if(dist2point(boneco.vx + center.x, boneco.vy + center.y, this.arr[0].x, this.arr[0].y) <= this.arr[0].actRange) alert('Certo');
            else alert('Errado');
        }        
    }
    // draw : function(){
    //     for(let i = 0; i < this.arr.lenght; i++){
    //         if(this.arr[i].show) this.arrdraw.push(this.arr[i])
    //     }
    // }
};
//Colocar um target padrão pra teste
targets.arr.push(new target(300, 300, 10, true));
targets.arr.push(new target(120, 200, 5, true));
//Se deve definir se os alvos vão ser pegos ordenados ou em qualquer ordem (Por padrão eles são definidos como ordenados)

//COMO TRANSFORMAR E PEGAR DE UM ARQUIVO JSON - VAI SER ÚTIL DEPOIS E FUNCIONA DESSE JEITO
// const myJSON = JSON.stringify(targets);
// var myObj = JSON.parse(myJSON);

//É PRECISO CHAMAR ESSA FUNÇÃO DEPOIS DE TODO ALVO NOVO COLOCADO PARA PODER DESENHÁ-LO (SE QUISER DESENHAR)
// targets.draw();


function desenhar(){	
	clear(); 
	//**********************//	
	//ESPAÇO PARA ANIMAÇÃO, SIMULAÇÃO OU ATIVIDADE

    //FUNÇÕES DO MOVIMENTO DO BONECO
    if(!boneco.up && !boneco.down && !boneco.right && !boneco.left){
        corpoParado(center.x + boneco.vx, center.y + boneco.vy, boneco.size, '#fad390', '#3498db', '#fad390', darkcolor, boneco.angle);
    }
    else if(boneco.up){
        boneco.walk += boneco.vel;
        boneco.vy -= boneco.vel*1.5;
        andando(center.x + boneco.vx, center.y + boneco.vy, boneco.size, '#fad390', '#3498db', '#fad390', darkcolor, boneco.walk, boneco.angle);
    }
    else if(boneco.down){
        boneco.walk += boneco.vel;
        boneco.vy += boneco.vel*1.5;
        andando(center.x + boneco.vx, center.y + boneco.vy, boneco.size, '#fad390', '#3498db', '#fad390', darkcolor, boneco.walk, boneco.angle);
    }
    else if(boneco.right){
        boneco.walk += boneco.vel;
        boneco.vx += boneco.vel*1.5;
        andando(center.x + boneco.vx, center.y + boneco.vy, boneco.size, '#fad390', '#3498db', '#fad390', darkcolor, boneco.walk, boneco.angle);
    }
    else if(boneco.left){
        boneco.walk += boneco.vel;
        boneco.vx -= boneco.vel*1.5;
        andando(center.x + boneco.vx, center.y + boneco.vy, boneco.size, '#fad390', '#3498db', '#fad390', darkcolor, boneco.walk, boneco.angle);
    }
    
    //DESENHA AS BANDEIRAS
    // alert(targets.arr.length);
    for(let i = 0; i < targets.arr.length; i++){
        if(targets.arr[i].show) circle(targets.arr[i].x, targets.arr[i].y, targets.arr[i].actRange, 1, darkcolor, redcolor);
    }

	//**********************//	
	animationFrame(desenhar); 	
}
draw(desenhar);
</script>
<button onmousedown="boneco.mup()" onmouseup="boneco.stopmoving()">UP</button>
<button onmousedown="boneco.mdown()" onmouseup="boneco.stopmoving()">DOWN</button>
<button onmousedown="boneco.mright()" onmouseup="boneco.stopmoving()">RIGHT</button>
<button onmousedown="boneco.mleft()" onmouseup="boneco.stopmoving()">LEFT</button>
<button onclick="targets.confirm()">CONFIRM</button>
<!-- -------------------------------------------- -->
</body>		
</html>